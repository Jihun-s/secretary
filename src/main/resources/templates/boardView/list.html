<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>list</title>
<script th:src="@{/js/jquery-3.7.0.js}"></script>
<script>
$(document).ready(function () {
    getList();
    
    document.getElementById('boardCategory1').addEventListener('change', getList);
});

function getList() {	
    const selectedCategory = document.getElementById('boardCategory1').value; 

    $.ajax({
        url: 'getList',
        type: 'get',
        dataType: 'json',
        success: function (list) {
            let filteredList = list;
            if (selectedCategory !== 'all') {
                filteredList = list.filter((item) => item.boardCategory1 === selectedCategory);
            }
            let htmlContent = '';
            filteredList.forEach((item) => {
                htmlContent += `
                    <tr>
                        <td>${item.boardStatus}</td>
                        <td><a href="read?boardId=${item.boardId}">${item.boardTitle}</a></td>
                        <td>${item.userId}</td>		       
                        <td>${item.boardInputdate}</td>
                    </tr>
                `;
            });
            $('#boardList').html(htmlContent);
        },
        error: function (e) {
            alert(JSON.stringify(e));
        },
    });
}

function deleteOne(){
    let a = confirm('삭제하시겠습니까?');
    if(a){
        let boardId = document.getElementById('boardId').value;
        location.href = 'deleteOne?boardId=' + boardId;
    }
}
</script>
</head>
<body>
<p><a th:href="@{/}">홈</a></p>
<a th:href="@{/board/write}">문의글 등록</a>
<a>내Q&A만 보기</a>

<select name="boardCategory1" id="boardCategory1">
    <option value="all">전체</option>
    <option value="notification">공지</option>
    <option value="frequently">자주묻는질문</option>
    <option value="inquiry">1:1문의</option>
</select>

<table>
    <thead>
        <tr>
            <th>답변상태</th>
            <th>제목</th>
            <th>작성자</th>
            <th>작성일</th>                   
        </tr>
    </thead>
    <tbody id="boardList"></tbody>
</table>
</body>
</html>
